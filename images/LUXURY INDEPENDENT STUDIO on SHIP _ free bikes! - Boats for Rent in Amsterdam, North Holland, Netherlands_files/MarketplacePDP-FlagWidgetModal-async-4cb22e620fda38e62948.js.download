!function(){var e=webpackJsonp([842],{ZKsZ:function(e,t,a){"use strict";var n=a("igBp"),r=a("E7Qp"),l=function(){function e(){babelHelpers.classCallCheck(this,e),this.generateActions("createFlagSuccess","flagUndoComplete")}return babelHelpers.createClass(e,[{key:"createFlag",value:function(){function e(e){var t=this;Object(r.a)(e).then(function(a){var n=a.flag_id;return t.actions.createFlagSuccess({flagId:n||e.flagId,flaggableId:e.flaggableId})})}return e}()},{key:"undoFlag",value:function(){function e(e){var t=this,a=e.flagId,n=e.postId;Object(r.b)(a).then(function(e){return t.actions.flagUndoComplete({success:e.success,postId:n})})}return e}()}]),e}();l.displayName="FlagWidgetModalActions",t.a=n.a.createActions(l)},"ftk/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a.d(t,"FLAGGABLE_TYPES",function(){return k});var n=a("yu5W"),r=a.n(n),l=a("Jmof"),s=a.n(l),o=a("wLXD"),i=a.n(o),c=a("kUb7"),u=a.n(c),p=a("M/w6"),m=a.n(p),d=a("C7vi"),f=a.n(d),g=a("jdym"),h=a("WXu/"),b=a.n(h),_=a("ZKsZ"),E=a("5W78"),k={USER:"user",LISTING:"listing",MESSAGE:"message",REVIEW:"review",ARTICLE:"article",ARTICLE_COMMENT:"article_comment"},y={flaggableType:r.a.oneOf(Object.values(k)).isRequired,flagOptions:r.a.object.isRequired,visible:r.a.bool.isRequired,createFlagUrl:r.a.string.isRequired,flaggableId:r.a.number,onClose:r.a.func,flagId:r.a.number,resetOnClose:r.a.bool},C={resetOnClose:!1},v=function(e){function t(e){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onItemClick=a.onItemClick.bind(a),a.onOtherClick=a.onOtherClick.bind(a),a.onConfirmationClose=a.onConfirmationClose.bind(a),a.renderFlagOption=a.renderFlagOption.bind(a),a.state={showConfirmation:!1,showOtherFields:!1},a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onConfirmationClose",value:function(){function e(){this.props.onClose(),this.props.resetOnClose&&this.setState({showConfirmation:!1,showOtherFields:!1})}return e}()},{key:"onItemClick",value:function(){function e(e){var t=e.target.getAttribute("data-reason-id"),a=void 0;("Other"!==t||(a=i.a.findDOMNode(this.refs.otherReasonTextarea).value,a.trim()))&&(_.a.createFlag({url:this.props.createFlagUrl,flaggableType:this.props.flaggableType,flaggableId:this.props.flaggableId,flagName:t,flagId:this.props.flagId,otherReason:a}),this.setState({showConfirmation:!0}),e&&e.preventDefault())}return e}()},{key:"onOtherClick",value:function(){function e(){this.setState({showOtherFields:!0})}return e}()},{key:"renderThankYou",value:function(){function e(){switch(this.props.flaggableType){case k.USER:return s.a.createElement(u.a,{k:"thank_you_for_reporting_this_user"});case k.LISTING:return s.a.createElement(u.a,{k:"thank_you_for_reporting_this_listing"});case k.MESSAGE:return s.a.createElement(u.a,{k:"thank_you_for_reporting_this_message"});default:return""}}return e}()},{key:"renderConfirmation",value:function(){function e(){return s.a.createElement("div",null,s.a.createElement("div",{className:"panel-header thanks-header"},s.a.createElement(u.a,{k:"flag_widget_thank_you"})),s.a.createElement("div",{className:"panel-body flag-thank-you"},s.a.createElement("p",null,this.renderThankYou()," ",s.a.createElement(u.a,{k:"your_participation_helps_and_we_appreciate_it"})),s.a.createElement("div",{className:"text-center"},s.a.createElement("button",{type:"button",className:"btn col-center",onClick:this.onConfirmationClose},s.a.createElement(u.a,{k:"modal_close"})))))}return e}()},{key:"renderFlagOption",value:function(){function e(e,t){var a=this.props.flagOptions,n=a.optionsNative,r=a.optionsDetails,l=n[t],o="Other"===l,i=o?this.onOtherClick:this.onItemClick;return s.a.createElement("div",{className:f()("row space-2",{other:o}),key:"option-"+String(l)},s.a.createElement("div",{className:"col-sm-11 col-middle-alt"},s.a.createElement("button",{type:"button",className:f()("flag-reasons btn btn-large btn-block",{"space-2":o}),dangerouslySetInnerHTML:{__html:e},"data-reason-id":l,onClick:i})),s.a.createElement("div",{className:f()("col-sm-1 col-middle-alt",{"space-2":o})},s.a.createElement(g.a,{content:r[l],accessibilityLabel:m.a.t("flag_widget_what_does_this_reason_mean"),inline:!0})))}return e}()},{key:"renderForm",value:function(){function e(){var e=void 0;return"message"===this.props.flaggableType?e=s.a.createElement(u.a,{k:"report_message_question"}):"listing"===this.props.flaggableType?e=s.a.createElement(u.a,{k:"report_listing_question"}):"user"===this.props.flaggableType?e=s.a.createElement(u.a,{k:"report_user_question"}):"review"===this.props.flaggableType?e=s.a.createElement(u.a,{k:"report_review_question"}):"article"===this.props.flaggableType?e=s.a.createElement(u.a,{k:"report_article_question"}):"article_comment"===this.props.flaggableType&&(e=s.a.createElement(u.a,{k:"report_article_comment_question"})),s.a.createElement("form",{method:"POST",action:this.props.createFlagUrl,className:"new_user_flag"},s.a.createElement("div",{className:"panel-header main-header"},s.a.createElement("button",{className:"modal-close",onClick:this.props.onClose,type:"button",title:m.a.t("modal_close"),"aria-label":m.a.t("modal_close")}),e),s.a.createElement("div",{className:"panel-body flag-form"},s.a.createElement("p",null,s.a.createElement(u.a,{k:"flag_instructions"}),"Â ",s.a.createElement("a",{href:"/help/article/4"},s.a.createElement(u.a,{k:"learn_more",html:!0}))),this.props.flagOptions.options.map(this.renderFlagOption),this.state.showOtherFields&&s.a.createElement("div",{className:"row"},s.a.createElement("label",{className:"screen-reader-only",htmlFor:"flaggable-"+String(this.props.flaggableId)},s.a.createElement(u.a,{k:"please_describe_a_reason"})),s.a.createElement("div",{className:"col-sm-11"},s.a.createElement("textarea",{id:"flaggable-"+String(this.props.flaggableId),className:"space-2",cols:"40",rows:"3",name:"user_flag[other_note]",placeholder:m.a.t("please_describe_a_reason"),ref:"otherReasonTextarea",required:!0})))),this.state.showOtherFields&&s.a.createElement("div",{className:"panel-footer"},s.a.createElement("button",{className:"btn btn-primary btn-large","data-reason-id":"Other",type:"submit",onClick:this.onItemClick},m.a.t("submit"))),s.a.createElement("input",{type:"hidden",name:"user_flag[flaggable_type]",value:this.props.flaggableType}),s.a.createElement("input",{type:"hidden",name:"user_flag[flaggable_id]",value:this.props.flaggableId}),s.a.createElement("input",{type:"hidden",name:"user_flag[name]"}),s.a.createElement("input",{type:"hidden",name:"user_flag[id]",value:this.props.flagId}),s.a.createElement(E.a,null))}return e}()},{key:"render",value:function(){function e(){return s.a.createElement(b.a,{className:"flag-modal",onClose:this.props.onClose,visible:this.props.visible},!this.state.showConfirmation&&this.renderForm(),this.state.showConfirmation&&this.renderConfirmation())}return e}()}]),t}(s.a.Component);v.propTypes=y,v.defaultProps=C,t.default=v}});"object"==typeof module&&(module.exports=e.default||e)}();